<div class="employee-container">
  <div class="employee-header">
    <h2>Employee List</h2>
  </div>

  <div class="toolbar">
    <input
      type="text"
      placeholder="Search Employees..."
      [(ngModel)]="searchTerm"
      (ngModelChange)="employeeStore.setSearchTerm(searchTerm)"
    />
    <button class="add-btn" (click)="openForm()">Add New</button>
  </div>

  @if(employeeStore.isLoading()) {
  <div>Loading employees</div>
  } @else {
  <table class="employee-table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Department</th>
        <th>Mobile</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      @for( emp of employeeStore.employeesFilterAndPaginated(); track $index) {
      <tr>
        <td>{{ emp.name }}</td>
        <td>{{ emp.department }}</td>
        <td>{{ emp.mobile }}</td>
        <td>{{ emp.isActive ? "Active" : "In Active" }}</td>
        <td>
          <i class="fas fa-pencil-alt edit" (click)="openForm(emp)"></i>
          <i class="fas fa-trash delete" (click)="deleteEmployee(emp)"></i>
        </td>
      </tr>
      }
    </tbody>
  </table>
  <div class="pagination">
    <button
      (click)="employeeStore.setPage(employeeStore.currentPage() - 1)"
      [disabled]="employeeStore.currentPage() === 1"
    >
      Previous
    </button>
    <span
      >{{ employeeStore.currentPage() }} of
      {{ employeeStore.totalPages() }}</span
    >
    <button
      (click)="employeeStore.setPage(employeeStore.currentPage() + 1)"
      [disabled]="employeeStore.currentPage() === employeeStore.totalPages()"
    >
      Next
    </button>
    <select
      [(ngModel)]="pageSize"
      (ngModelChange)="employeeStore.setPageSize(pageSize)"
    >
      <option *ngFor="let size of pageSizeOptions" [ngValue]="size">
        {{ size }} per page
      </option>
    </select>
  </div>
  }

  <ng-container #container></ng-container>
</div>
